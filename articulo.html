<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artículo - Fundazoe</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .article-header { height: 50vh; min-height: 400px; background-size: cover; background-position: center; display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: relative; margin-top: 70px; }
        .article-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1; }
        .article-title-box { position: relative; z-index: 2; max-width: 800px; padding: 20px; }
        .article-body { max-width: 800px; margin: 0 auto; padding: 60px 20px; font-size: 18px; line-height: 1.8; color: #444; }
    </style>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <header>
        <div class="logo"><a href="index.html"><img src="images/logo.png" alt="Logo"></a></div>
        <nav class="nav-links" id="navLinks">
            <a href="recursos.html">← Volver a Recursos</a>
        </nav>
    </header>

    <main id="main-content">
        <div style="padding:150px; text-align:center;">⏳ Cargando artículo...</div>
    </main>

    <footer><p>© 2025 Fundación Fundazoe.</p></footer>

    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyC1hu_jiAx4JKU5QWOZUW6RVvlo4Td_sM4",
            authDomain: "fundazoe-web2.firebaseapp.com",
            projectId: "fundazoe-web2",
            storageBucket: "fundazoe-web2.firebasestorage.app",
            messagingSenderId: "1016512867168",
            appId: "1:1016512867168:web:8b0d3108e85dee1fab4c05",
            measurementId: "G-JW3ME3FF9Q"
        };

        firebase.initializeApp(firebaseConfig);
        var db = firebase.firestore();

        // Obtener ID de la URL
        var params = new URLSearchParams(window.location.search);
        var docId = params.get('id');

        if(docId) {
            db.collection("articulos").doc(docId).get().then((doc) => {
                if (doc.exists) {
                    var data = doc.data();
                    document.title = data.titulo;
                    document.getElementById('main-content').innerHTML = `
                        <div class="article-header" style="background-image: url('${data.imagen}');">
                            <div class="article-overlay"></div>
                            <div class="article-title-box">
                                <span style="background:#F57C00; padding:5px 15px; border-radius:20px; font-weight:bold; font-size:14px;">${data.categoria}</span>
                                <h1 style="font-size:2.5rem; margin:20px 0;">${data.titulo}</h1>
                                <p>${data.autor || 'Fundazoe'} • ${data.fecha || ''}</p>
                            </div>
                        </div>
                        <article class="article-body">
                            ${data.contenido}
                            <div style="margin-top:50px; text-align:center; border-top:1px solid #eee; padding-top:30px;">
                                <a href="contacto.html" class="btn btn-primary">Hablar con un Consejero</a>
                            </div>
                        </article>
                    `;
                } else {
                    document.getElementById('main-content').innerHTML = '<h2 style="text-align:center; padding:100px;">Artículo no encontrado.</h2>';
                }
            });
        } else {
            document.getElementById('main-content').innerHTML = '<h2 style="text-align:center; padding:100px;">Enlace inválido.</h2>';
        }
    </script>
</body>
</html>